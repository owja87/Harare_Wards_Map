<!DOCTYPE html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, user-scalable=yes">

<html>
<head>
  <!-- Leaflet Stylesheet and Script files -->
  <title>Harare Ward Map</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.0/dist/leaflet.css"
   integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
   crossorigin=""/>
   <script src="https://unpkg.com/leaflet@1.3.0/dist/leaflet.js"
   integrity="sha512-C7BBF9irt5R7hqbUm2uxtODlUVs+IsNu2UULGuZN7gM+k/mmeG4xvIEac01BtQa4YIkUpp23zZC4wIwuXaPMQA=="
   crossorigin=""></script>
  
  <!-- Custom style sheet -->
  <link rel="stylesheet" type="text/css" href="style.css">
  
</head>

<body>
  
  <div class="container">
  	<div class="overlay">
		<img src="SMART HarareLogo.svg" alt="SMART Harare Logo" align="left" width="70px" height="55px" />
  	</div>
  	<div id="map"></div>
  </div>
  <script src="geometry/harare_wards_geojson.js" type="text/javascript"></script>
  <script>
	
	 // Detects the userAgrent, if the user is using a mobile device the map has disabled draging and tapping.
	var pc = true;

	if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
  	pc = false;
	}
	
	//Initialize the map  
	var map = L.map('map', {
		center: [-17.826,31.051],
		zoom: 11, 
		scrollWheelZoom: false,
		dragging: pc,
  		tap: pc
	});
	
	// Make leaflet attribution open in new window	  
	map.attributionControl.setPrefix('<a href="http://leafletjs.com/" target="_blank">Leaflet</a>');

	// Enable mouse scroll when map is active for Desktop */	  
	map.on('focus', function() { map.scrollWheelZoom.enable(); });
	map.on('blur', function() { map.scrollWheelZoom.disable(); });

	// Diable one finger drag and only allow two finger drag
	const mapEl = document.querySelector("#map");
	  
	mapEl.addEventListener("touchstart", onTwoFingerDrag);
	mapEl.addEventListener("touchend", onTwoFingerDrag);

	function onTwoFingerDrag (e) {
  		if (e.type === 'touchstart' && e.touches.length === 1) {
    			e.currentTarget.classList.add('swiping')
  		} else {
    			e.currentTarget.classList.remove('swiping')
  			}
		}
	//Add basemap layer  
	L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
		maxZoom: 18,
		attribution: 'Map data &copy; <a href="http://openstreetmap.org" target="_blank">OpenStreetMap</a> contributors, ' +
			'<a href="http://creativecommons.org/licenses/by-sa/2.0/" target="_blank">CC-BY-SA</a>, ' +
			'Imagery Â© <a href="http://mapbox.com" target="_blank">Mapbox</a>',
		id: 'mapbox.streets',
	}).addTo(map);
	
	//style for GEOJson layer
	var myStyle = {
    	  "color": "#ff7800",
	  "opacity": 0.65
  	};
  
	//Add GEOJson layer
	L.geoJSON(wards, {
		onEachFeature: function (feature, layer) {
        		layer.bindPopup(feature.properties.Name);
    		},
		style: myStyle
	}).addTo(map);
	  
  </script>
  
</body>
</html>
